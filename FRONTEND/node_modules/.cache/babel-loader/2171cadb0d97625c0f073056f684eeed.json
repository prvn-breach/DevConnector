{"ast":null,"code":"import _defineProperty from\"/home/workspace/practise-mern/practise/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/workspace/practise-mern/practise/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/workspace/practise-mern/practise/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/workspace/practise-mern/practise/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/workspace/practise-mern/practise/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/workspace/practise-mern/practise/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import TextAreaFieldGroup from\"../common/TextAreaFieldGroup\";import{addComment}from\"../../actions/postActions\";var CommentForm=/*#__PURE__*/function(_Component){_inherits(CommentForm,_Component);var _super=_createSuper(CommentForm);function CommentForm(props){var _this;_classCallCheck(this,CommentForm);_this=_super.call(this,props);_this.state={text:\"\",errors:{}};_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));return _this;}_createClass(CommentForm,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.errors){this.setState({errors:nextProps.errors});}}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();var user=this.props.auth.user;var postId=this.props.postId;var newComment={text:this.state.text,name:user.name,avatar:user.avatar};this.props.addComment(postId,newComment);this.setState({text:''});}},{key:\"onChange\",value:function onChange(e){this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"render\",value:function render(){var errors=this.state.errors;return/*#__PURE__*/React.createElement(\"div\",{className:\"post-form mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header bg-info text-white\"},\"Make a comment for this post\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(TextAreaFieldGroup,{placeholder:\"Post a comment\",name:\"text\",value:this.state.text,onChange:this.onChange,error:errors.text}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-dark\"},\"Submit\")))));}}]);return CommentForm;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,errors:state.errors};};export default connect(mapStateToProps,{addComment:addComment})(CommentForm);","map":{"version":3,"sources":["/home/workspace/practise-mern/practise/DevConnector/client/src/components/post/CommentForm.js"],"names":["React","Component","connect","TextAreaFieldGroup","addComment","CommentForm","props","state","text","errors","onSubmit","bind","onChange","nextProps","setState","e","preventDefault","user","auth","postId","newComment","name","avatar","target","value","mapStateToProps"],"mappings":"wiCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,MAAOC,CAAAA,kBAAP,KAA+B,8BAA/B,CACA,OAASC,UAAT,KAA2B,2BAA3B,C,GAEMC,CAAAA,W,0GACJ,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,EADK,CAEXC,MAAM,CAAE,EAFG,CAAb,CAIA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB,CACA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcD,IAAd,+BAAhB,CAPiB,aAQlB,C,oGAEyBE,S,CAAW,CACjC,GAAGA,SAAS,CAACJ,MAAb,CAAqB,CACjB,KAAKK,QAAL,CAAc,CAAEL,MAAM,CAAEI,SAAS,CAACJ,MAApB,CAAd,EACH,CACJ,C,0CAEQM,C,CAAE,CACPA,CAAC,CAACC,cAAF,GADO,GAECC,CAAAA,IAFD,CAEU,KAAKX,KAAL,CAAWY,IAFrB,CAECD,IAFD,IAGCE,CAAAA,MAHD,CAGY,KAAKb,KAHjB,CAGCa,MAHD,CAKP,GAAMC,CAAAA,UAAU,CAAG,CACfZ,IAAI,CAAE,KAAKD,KAAL,CAAWC,IADF,CAEfa,IAAI,CAAEJ,IAAI,CAACI,IAFI,CAGfC,MAAM,CAAEL,IAAI,CAACK,MAHE,CAAnB,CAMA,KAAKhB,KAAL,CAAWF,UAAX,CAAsBe,MAAtB,CAA8BC,UAA9B,EACA,KAAKN,QAAL,CAAc,CAAEN,IAAI,CAAE,EAAR,CAAd,EACH,C,0CAEQO,C,CAAG,CACR,KAAKD,QAAL,oBAAiBC,CAAC,CAACQ,MAAF,CAASF,IAA1B,CAAiCN,CAAC,CAACQ,MAAF,CAASC,KAA1C,GACH,C,uCAEQ,IACCf,CAAAA,MADD,CACY,KAAKF,KADjB,CACCE,MADD,CAEP,mBACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,gCAAf,iCADF,cAEE,2BAAK,SAAS,CAAC,WAAf,eACE,4BAAM,QAAQ,CAAE,KAAKC,QAArB,eACI,oBAAC,kBAAD,EACI,WAAW,CAAC,gBADhB,CAEI,IAAI,CAAC,MAFT,CAGI,KAAK,CAAE,KAAKH,KAAL,CAAWC,IAHtB,CAII,QAAQ,CAAE,KAAKI,QAJnB,CAKI,KAAK,CAAEH,MAAM,CAACD,IALlB,EADJ,cAQE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,cAAhC,WARF,CADF,CAFF,CADF,CADF,CAqBD,C,yBA3DuBP,S,EAqE1B,GAAMwB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAlB,KAAK,QAAK,CAC9BW,IAAI,CAAEX,KAAK,CAACW,IADkB,CAE9BT,MAAM,CAAEF,KAAK,CAACE,MAFgB,CAAL,EAA7B,CAKA,cAAeP,CAAAA,OAAO,CAACuB,eAAD,CAAkB,CAAErB,UAAU,CAAVA,UAAF,CAAlB,CAAP,CAAyCC,WAAzC,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport TextAreaFieldGroup from \"../common/TextAreaFieldGroup\";\nimport { addComment } from \"../../actions/postActions\";\n\nclass CommentForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: \"\",\n      errors: {},\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n      if(nextProps.errors) {\n          this.setState({ errors: nextProps.errors });\n      }\n  }\n\n  onSubmit(e){\n      e.preventDefault();\n      const { user } = this.props.auth;\n      const { postId } = this.props;\n\n      const newComment = {\n          text: this.state.text,\n          name: user.name,\n          avatar: user.avatar\n      }\n\n      this.props.addComment(postId, newComment);\n      this.setState({ text: '' });\n  }\n\n  onChange(e) {\n      this.setState({ [e.target.name]: e.target.value });\n  }\n\n  render() {\n    const { errors } = this.state;\n    return (\n      <div className=\"post-form mb-3\">\n        <div className=\"card card-info\">\n          <div className=\"card-header bg-info text-white\">Make a comment for this post</div>\n          <div className=\"card-body\">\n            <form onSubmit={this.onSubmit}>\n                <TextAreaFieldGroup \n                    placeholder=\"Post a comment\"\n                    name=\"text\"\n                    value={this.state.text}\n                    onChange={this.onChange}\n                    error={errors.text}\n                />\n              <button type=\"submit\" className=\"btn btn-dark\">\n                Submit\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nCommentForm.propTypes = {\n    addComment: PropTypes.func.isRequired,\n    auth: PropTypes.object.isRequired,\n    postId: PropTypes.string.isRequired,\n    errors: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n    auth: state.auth,\n    errors: state.errors\n});\n\nexport default connect(mapStateToProps, { addComment })(CommentForm);\n"]},"metadata":{},"sourceType":"module"}